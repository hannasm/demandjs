var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,e,a){c!=Array.prototype&&c!=Object.prototype&&(c[e]=a.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var e=0;return $jscomp.iteratorPrototype(function(){return e<c.length?{done:!1,value:c[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();var e=c[Symbol.iterator];return e?e.call(c):$jscomp.arrayIterator(c)};
$jscomp.polyfill=function(c,e,a,b){if(e){a=$jscomp.global;c=c.split(".");for(b=0;b<c.length-1;b++){var d=c[b];d in a||(a[d]={});a=a[d]}c=c[c.length-1];b=a[c];e=e(b);e!=b&&null!=e&&$jscomp.defineProperty(a,c,{configurable:!0,writable:!0,value:e})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(c){function e(){this.batch_=null}function a(a){return a instanceof d?a:new d(function(f,b){f(a)})}if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;e.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};e.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var b=$jscomp.global.setTimeout;e.prototype.asyncExecuteFunction=function(a){b(a,
0)};e.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var d=a[b];delete a[b];try{d()}catch(k){this.asyncThrow_(k)}}}this.batch_=null};e.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var d=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(h){b.reject(h)}};d.prototype.createResolveAndReject_=
function(){function a(a){return function(f){d||(d=!0,a.call(b,f))}}var b=this,d=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};d.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof d)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};d.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(h){this.reject_(h);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};d.prototype.reject_=function(a){this.settle_(2,a)};d.prototype.fulfill_=function(a){this.settle_(1,a)};d.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};d.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.onSettledCallbacks_=null}};var g=new e;d.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};d.prototype.settleSameAsThenable_=function(a,b){var d=this.createResolveAndReject_();try{a.call(b,d.resolve,d.reject)}catch(k){d.reject(k)}};d.prototype.then=function(a,b){function f(a,b){return"function"==typeof a?function(b){try{g(a(b))}catch(u){c(u)}}:b}var g,c,l=new d(function(a,
b){g=a;c=b});this.callWhenSettled_(f(a,g),f(b,c));return l};d.prototype.catch=function(a){return this.then(void 0,a)};d.prototype.callWhenSettled_=function(a,b){function d(){switch(f.state_){case 1:a(f.result_);break;case 2:b(f.result_);break;default:throw Error("Unexpected state: "+f.state_);}}var f=this;null==this.onSettledCallbacks_?g.asyncExecute(d):this.onSettledCallbacks_.push(function(){g.asyncExecute(d)})};d.resolve=a;d.reject=function(a){return new d(function(b,d){d(a)})};d.race=function(b){return new d(function(d,
f){for(var g=$jscomp.makeIterator(b),c=g.next();!c.done;c=g.next())a(c.value).callWhenSettled_(d,f)})};d.all=function(b){var f=$jscomp.makeIterator(b),g=f.next();return g.done?a([]):new d(function(b,d){function c(a){return function(d){l[a]=d;e--;0==e&&b(l)}}var l=[],e=0;do l.push(void 0),e++,a(g.value).callWhenSettled_(c(l.length-1),d),g=f.next();while(!g.done)})};return d},"es6","es3");$jscomp.owns=function(c,e){return Object.prototype.hasOwnProperty.call(c,e)};
$jscomp.polyfill("WeakMap",function(c){function e(a){$jscomp.owns(a,b)||$jscomp.defineProperty(a,b,{value:{}})}function a(a){var b=Object[a];b&&(Object[a]=function(a){e(a);return b(a)})}if(function(){if(!c||!Object.seal)return!1;try{var a=Object.seal({}),b=Object.seal({}),d=new c([[a,2],[b,3]]);if(2!=d.get(a)||3!=d.get(b))return!1;d.delete(a);d.set(b,4);return!d.has(a)&&4==d.get(b)}catch(k){return!1}}())return c;var b="$jscomp_hidden_"+Math.random().toString().substring(2);a("freeze");a("preventExtensions");
a("seal");var d=0,g=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};g.prototype.set=function(a,d){e(a);if(!$jscomp.owns(a,b))throw Error("WeakMap key fail: "+a);a[b][this.id_]=d;return this};g.prototype.get=function(a){return $jscomp.owns(a,b)?a[b][this.id_]:void 0};g.prototype.has=function(a){return $jscomp.owns(a,b)&&$jscomp.owns(a[b],this.id_)};g.prototype.delete=
function(a){return $jscomp.owns(a,b)&&$jscomp.owns(a[b],this.id_)?delete a[b][this.id_]:!1};return g},"es6","es3");$jscomp.polyfill("Object.assign",function(c){return c?c:function(c,a){for(var b=1;b<arguments.length;b++){var d=arguments[b];if(d)for(var g in d)$jscomp.owns(d,g)&&(c[g]=d[g])}return c}},"es6","es3");
var _createClass=function(){function c(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(e,a,b){a&&c(e.prototype,a);b&&c(e,b);return e}}();function _classCallCheck(c,e){if(!(c instanceof e))throw new TypeError("Cannot call a class as a function");}
(function(c){c=function(){function c(a){var b=this;_classCallCheck(this,c);this.phRegistry=new WeakMap;this.loaded=new WeakMap;this.options=Object.assign({pendingHtml:'<div style="width:100%;height:100%">Loading In Progress</div>',errorHtml:'<div style="background-color:#F00;color:#FFF;font-size:20pt;">ERROR</div>',createPlaceholder:function(a){return b.createPlaceholder()},createErrorNode:function(a){return b.createErrorNode()},shouldRemove:function(a){return!("tagName"in a)||!a.tagName.match(/link/i)},
shouldInsertOnLoad:function(a){return b.options.shouldRemove(a)},selector:"img,video,picture,iframe,link.demand",rootMargin:"48px",threshold:0,onLoadBegin:function(a){},onLoadEnd:function(a){},onLoadError:function(a){},onLoadComplete:function(a){}},a);this.mutation=new MutationObserver(function(a,g){return b.observeMutation(a,g)});this.mutationOptions={childList:!0,subtree:!0};this.intersectionOptions={root:null,rootMargin:this.options.rootMargin,threshold:this.options.threshold};this.intersection=
new IntersectionObserver(function(a,g){return b.observeIntersection(a,g)},this.intersectionOptions);this.observeTargets(this.queryTargets());this.mutation.observe(document.body,this.mutationOptions)}_createClass(c,[{key:"observeMutation",value:function(a){var b=!0,d=!1,g=void 0;try{for(var c=a[Symbol.iterator](),e;!(b=(e=c.next()).done);b=!0){var h=e.value;if("childList"===h.type){a=!0;var k=!1,m=void 0;try{for(var n=h.addedNodes[Symbol.iterator](),r;!(a=(r=n.next()).done);a=!0){var t=r.value;this.isTargetMatch(t)&&
this.observeTarget(t)}}catch(p){k=!0,m=p}finally{try{!a&&n.return&&n.return()}finally{if(k)throw m;}}}}}catch(p){d=!0,g=p}finally{try{!b&&c.return&&c.return()}finally{if(d)throw g;}}}},{key:"observeIntersection",value:function(a){var b=!0,d=!1,g=void 0;try{for(var c=a[Symbol.iterator](),e;!(b=(e=c.next()).done);b=!0){var h=e.value;if(h.isIntersecting){var k=this.phRegistry.get(h.target);void 0===k||k.loading||(k.loading=!0,this.beginLoad(k))}}}catch(m){d=!0,g=m}finally{try{!b&&c.return&&c.return()}finally{if(d)throw g;
}}}},{key:"beginLoad",value:function(a){var b=this,d=this.resolveTarget(a);a=d.target;var c=d.registration;if(c.extraData.shouldInjectHtml)d=c.extraData.href,this.options.onLoadBegin(a),fetch(d).then(function(a){if(!a.ok)throw Error(a.status+"_"+a.statusText);return a.text()}).then(function(a){b.injectLink(c.target,a)}).catch(function(a){b.onLoadError(c,a)});else if(c.extraData.shouldRestore)setTimeout(function(){return b.restoreTarget(c)},0);else throw"Unknown load operation";}},{key:"isLoaded",
value:function(a){return a.complete||!1}},{key:"injectLink",value:function(a,b){var d=this.phRegistry.get(a);this.injectHtml(a,b);this.onLoadComplete(d)}},{key:"injectScript",value:function(a,b,d){var c=document.write,f="";document.write=function(a){return f+=a};(new Function(d+"\n//@ sourceURL="+b))();""!==f&&this.injectHtml(a,"<body>"+f+"</body>");document.write=c}},{key:"injectHtml",value:function(a,b){var d=this,c=document.createElement("html");c.innerHTML=b;var f=c.getElementsByTagName("body"),
e=1;b=!0;c=!1;var h=void 0;try{for(var k=f[Symbol.iterator](),m;!(b=(m=k.next()).done);b=!0){var n=m.value;f=!0;var r=!1,t=void 0;try{for(var p=n.children[Symbol.iterator](),u;!(f=(u=p.next()).done);f=!0){var q=u.value;"tagName"in q&&q.tagName.match(/script/i)?function(){var b=e;e+=1;var c=Promise.resolve(q.innerHTML);"src"in q&&q.src&&(c=fetch(q.src).then(function(a){if(!a.ok)throw Error(a.status+"_"+a.statusText);return a.text()}));c.then(function(c){d.injectScript(a,a.href+".inline["+b+"].js",
c)})}():a.parentNode.insertBefore(q,a)}}catch(v){r=!0,t=v}finally{try{!f&&p.return&&p.return()}finally{if(r)throw t;}}}}catch(v){c=!0,h=v}finally{try{!b&&k.return&&k.return()}finally{if(c)throw h;}}}},{key:"onLoadComplete",value:function(a){var b=this.resolveTarget(a);a=b.target;b=b.registration;var d=this.options.shouldInsertOnLoad(b.target),c=!0,f=!1,e=void 0;try{for(var h=b.placeholders[Symbol.iterator](),k;!(c=(k=h.next()).done);c=!0){var m=k.value;d&&(d=!1,m.parentNode.insertBefore(b.target,
m));this.cleanupPlaceholder(m)}}catch(n){f=!0,e=n}finally{try{!c&&h.return&&h.return()}finally{if(f)throw e;}}this.cleanupRegistrationTarget(b);this.options.onLoadEnd(a);this.options.onLoadComplete(a)}},{key:"cleanupPlaceholder",value:function(a){this.intersection.unobserve(a);a.parentNode.removeChild(a);this.phRegistry.delete(a)}},{key:"cleanupRegistrationTarget",value:function(a){this.intersection.unobserve(a.target);this.phRegistry.delete(a.target);this.loaded.set(a.target,!0)}},{key:"onLoadError",
value:function(a,b){b=this.resolveTarget(a);a=b.target;b=b.registration;var d=!0,c=!0,e=!1,l=void 0;try{for(var h=b.placeholders[Symbol.iterator](),k;!(c=(k=h.next()).done);c=!0){var m=k.value;if(d){d=!1;var n=this.options.createErrorNode(b.target),r=!0,t=!1,p=void 0;try{for(var u=n[Symbol.iterator](),q;!(r=(q=u.next()).done);r=!0)m.parentNode.insertBefore(q.value,m)}catch(v){t=!0,p=v}finally{try{!r&&u.return&&u.return()}finally{if(t)throw p;}}}this.cleanupPlaceholder(m)}}catch(v){e=!0,l=v}finally{try{!c&&
h.return&&h.return()}finally{if(e)throw l;}}this.cleanupRegistrationTarget(b);this.options.onLoadError(a);this.options.onLoadComplete(a)}},{key:"createErrorNode",value:function(){var a=document.createElement("div");a.innerHTML=this.options.errorHtml;return Array.prototype.slice.call(a.childNodes)}},{key:"createPlaceholder",value:function(){var a=document.createElement("div");a.innerHTML=this.options.pendingHtml;return Array.prototype.slice.call(a.childNodes)}},{key:"registerPlaceholder",value:function(a,
b,d,c){b={isRegistration:!0,target:b,node:a,placeholders:d,extraData:c,loading:!1};this.phRegistry.set(a,b);return b}},{key:"resolveTarget",value:function(a){var b=a;"isRegistration"in a&&a.isRegistration?a=b.target:b=this.phRegistry.get(a);return{target:a,registration:b}}},{key:"restoreTarget",value:function(a){var b=this.resolveTarget(a);a=b.target;b=b.registration;var d=b.extraData;b.loading=!0;this.options.onLoadBegin(a);this._restoreTargetInternal(a,d);if(!d.canLoad)this.onLoadComplete(b)}},
{key:"_restoreTargetInternal",value:function(a,b){b.hasSrcset&&a.setAttribute("srcset",b.srcset);b.hasSizes&&a.setAttribute("sizes",b.sizes);b.hasSrc&&a.setAttribute("src",b.src);if(0<b.children.length)for(a=0;a<b.children.length;a++){var d=b.children[a];this._restoreTargetInternal(d.target,d)}}},{key:"captureTarget",value:function(a,b){var d=this,c={target:a,hasSrc:a.hasAttribute("src"),src:a.getAttribute("src"),hasSrcset:a.hasAttribute("srcset"),srcset:a.getAttribute("srcset"),hasSizes:a.hasAttribute("sizes"),
sizes:a.getAttribute("sizes"),isLink:"tagName"in a&&a.tagName.match(/link/i),hasHref:a.hasAttribute("href"),href:a.getAttribute("href"),children:[],shouldRestore:!1,canLoad:!1,shouldInjectHtml:!1};c.hasSrc&&a.removeAttribute("src");c.hasSrcset&&a.removeAttribute("srcset");c.hasSizes&&a.removeAttribute("sizes");c.isLink&&c.hasHref&&(c.shouldInjectHtml=!0);(c.hasSrc||c.hasSrcset)&&a===b&&(c.shouldRestore=!0,c.canLoad=!0,a.addEventListener("load",function(a){return d.onLoadComplete(b)}),a.addEventListener("error",
function(a){return d.onLoadError(b,a)}));if("tagName"in a&&a.tagName.match(/picture|video|audio/i)){a===b&&(c.shouldRestore=!0);for(var e=0;e<a.children.length;e++){var l=this.captureTarget(a.children[e]);l.index=e;c.children.push(l)}}return c}},{key:"isContextExcluded",value:function(a){return a&&"parentNode"in a?(a=a.parentNode)&&"tagName"in a?a.tagName.match(/picture|video|audio/i)?!0:this.isContextExcluded(a):!1:!1}},{key:"observeTarget",value:function(a){if(!this.isLoaded(a)&&!this.isContextExcluded(a)){var b=
this.captureTarget(a,a),c=this.options.createPlaceholder(a),e=!0,f=!1,l=void 0;try{for(var h=c[Symbol.iterator](),k;!(e=(k=h.next()).done);e=!0){var m=k.value;this.registerPlaceholder(m,a,c,b);a.parentNode.insertBefore(m,a);this.intersection.observe(m)}}catch(n){f=!0,l=n}finally{try{!e&&h.return&&h.return()}finally{if(f)throw l;}}this.registerPlaceholder(a,a,c,b);this.options.shouldRemove(a)?a.parentNode.removeChild(a):this.intersection.observe(a)}}},{key:"observeTargets",value:function(a){var b=
!0,c=!1,e=void 0;try{for(var f=a[Symbol.iterator](),l;!(b=(l=f.next()).done);b=!0)this.observeTarget(l.value)}catch(h){c=!0,e=h}finally{try{!b&&f.return&&f.return()}finally{if(c)throw e;}}}},{key:"isTargetMatch",value:function(a){return this.loaded.has(a)?!1:"matches"in a&&a.matches(this.options.selector)}},{key:"queryTargets",value:function(){var a=[],b=!0,c=!1,e=void 0;try{for(var f=document.querySelectorAll(this.options.selector)[Symbol.iterator](),l;!(b=(l=f.next()).done);b=!0)a.push(l.value)}catch(h){c=
!0,e=h}finally{try{!b&&f.return&&f.return()}finally{if(c)throw e;}}return a}},{key:"shouldRemove",value:function(a){return!("tagName"in a)||!a.tagName.match(/link/i)}}]);return c}();window.DemandJS=c})(window);
